<!DOCTYPE html>
<html>
<head><title>Static HTML To-Do</title></head>
<body>
    <h1>My To-Dos</h1>
    <ul id="todo-list"></ul> 
    <input type="text" id="taskInput">
    <button onclick="addTask()">Add Task</button>

    <script>
        // சர்வரிடம் இருந்து லிஸ்டை வாங்கி திரையில் காட்டும் Function
        
    async function loadTodos() {
    const response = await fetch('/api/todos');
    const data = await response.json();
    
    const list = document.getElementById('todo-list');

    // map பயன்படுத்தி புதிய HTML லிஸ்ட்டை உருவாக்குகிறோம்
    const htmlItems = data.map(item => {
        return `<li>${item}</li>`;
    });

    // .join("") ஏன் என்றால், map ஒரு Array-வை தரும், அதை String-ஆக மாற்ற வேண்டும்
    list.innerHTML = htmlItems.join("");
}




    

        // பட்டன் அழுத்தினால் வேலை செய்யும் Function
        async function addTask() {
            const input = document.getElementById('taskInput');
            await fetch('/api/add', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ task: input.value })
            });
            input.value = "";
            loadTodos(); // லிஸ்டை அப்டேட் செய்ய
        }





        // பக்கம் லோடு ஆனவுடன் லிஸ்டைக் காட்ட
        loadTodos();
    </script>
</body>
</html>